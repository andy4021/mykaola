<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>登录-网易考拉</title>
<link rel="shortcut icon" href="img/bitbug_favicon.ico">
<link rel="stylesheet" href="css/login.css">
</head>
<body>
	<header>
		<a href="index.html"><img src="img/z01.png" alt=""/></a>
		<img class="add" src="img/z02.png" alt=""/>
	</header>
	<section>
		<div class="aaa">
			<a href="https://www.kaola.com/footer/guarante.shtml?from=login"><img class="aab" src="img/z03.png" alt=""></a>
			<form id="t">
				<p class="faa">
					<span class="fab">手机号登录</span>
					<img src="img/l02.png" alt=""/>
					<span class="fab">邮箱登录</span>
				</p>
				<div class="fac">
					<a id="acti1" class="fba" href="#"><span class="imgg"></span><span class="words">使用密码验证登录</span></a>
					<a id="acti2" class="fba" href="#"><span class="imgg img_1"></span><span class="words">使用短信验证登录</span></a>
					<div class="clear"></div>
					<p class="fbb"><img src="img/z04.png" /><input type="text" id="stuid" placeholder="请输入手机号" /></p>
					<div id="login1">
						<img class="fad" src="img/z05.png" />
						<p class="fae"><img src="img/z06.png" /><span>向右拖动滑块填充拼图</span></p>
						<p class="faf fbc"><input type="text" id="stuage" placeholder="请输入短信验证码" /><a href="#">获取验证码</a></p>
					</div>
					<div id="login2">
						<p class="fbc"><img src="img/z07.png" /><input type="password" id="stupass" placeholder="请输入密码" /></p>
					</div>
					<div id="box">
						<div id="disp">
							<img class="imaa" src="img/z11.png" />
							<span id="spanId"></span>
						</div>						
					</div>					
					<p class="fag"><input type="button" id="btnLogin" value="登录" /></p>
					<div class="fah">
						<input id="color" type="checkbox" name="color" checked /><label for="color"></label><a href="https://reg.163.com/agreement_mobile_wap.shtml?v=20171127">10天免登录</a><a href="https://reg.163.com/agreement_mobile_ysbh_wap.shtml?v=20171127">遇到问题？</a>
					</div>
				</div>
				<p class="kka">
					<a href="###"><img src="img/l03.png" alt=""/></a>
					<a class="kkj" href="reg.html">手机快捷注册<img class="kkk" src="img/l04.png" alt=""/></a>
				</p>				
			</form>
			<div class="clear"></div>
		</div>		
	</section>
	<footer>
		<div class="foa">
			<a href="http://ir.netease.com/phoenix.zhtml?c=122303&p=irol-IRHome&no_protofix">About NetEase</a>|<a href="http://gb.corp.163.com/gb/about/overview.html?no_protofix">公司简介</a>|<a href="http://gb.corp.163.com/gb/contactus.html?no_protofix">练习方法</a>|<a href="https://www.kaola.com/footer/friendlylink.shtml?zn=footer">友情链接</a>|<a href="https://hr.163.com/?no_protofix">招聘信息</a>|<a href="https://help.mail.163.com/service.html">客户服务</a>|<a href="http://gb.corp.163.com/gb/legal.html?no_protofix">隐私政策</a>|<a href="http://emarketing.163.com/?no_protofix">网络营销</a>|<a href="https://www.kaola.com/?zn=footer">网易考拉</a>
		</div>
		<div class="fob">
			<span>网络文化经营许可证：浙网文[2016]0155-055号</span><span>增值电信业务经营许可证：浙B2-20160288</span><span><a href="https://pages.kaola.com/pages/activity/Businessentity.shtml">自营经营者信息</a></span><span>（浙）网械平台备字[2018]第00007号</span>
		</div>
		<div class="foc">
			<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010802002216&no_pro"><img src="img/z08.png" alt="">浙公网安备 33010802002216号 </a><span>网易公司版权所有©1997-2019</span>
			<a href="https://haitao.nos.netease.com/d37ac4eb-016f-485b-9577-04ae7e0f4bbd.jpg">互联网药品信息服务资格证书编号（浙）-2017-0027 </a><span>浙ICP备16011229号-6</span>
		</div>
		<div class="fod">
			<a href="https://ss.knet.cn/verifyseal.dll?sn=e15040881010058239iy2f000000&ct=df&a=1&pa=20160215"><img src="img/z09.png" alt="" /></a><a href="http://idinfo.zjaic.gov.cn/bscx.do?method=lzxx&id=3301083301980000040550&no_protofix"><img src="img/z10.png" /></a>
		</div>
		
	</footer>
</body>
</html>
<script type="text/javascript" src="js/cookieTools.js"></script>
<script type="text/javascript">
	let inputs = $("input");
	for(let i=0;i<inputs.length;i++){
		inputs[i].onfocus = function(){
			$("#disp").style.display="none";
			inputs[i].parentNode.style.borderColor="#4aafe9";
		};
		inputs[i].onblur = function(){
			inputs[i].parentNode.style.borderColor="#d5d5d5";

		};
	}
window.onload = function(){
	//切换登录方式
	$("#acti1").onclick=function(){
		$("#login1").style.display="none";
		$("#login2").style.display="block";
		$("#acti2").style.display="block";
		$("#acti1").style.display="none";

	}
	$("#acti2").onclick=function(){
		$("#login2").style.display="none";
		$("#login1").style.display="block";
		$("#acti1").style.display="block";
		$("#acti2").style.display="none";
	}
	$("#btnLogin").onclick = function(){
		//验证不能为空
		let inputs = $("input");
		let arr=["手机号","验证码","密码"]
		for(let i=0;i<inputs.length;i++){
			if (inputs[i].value==""){
				$("#disp").style.display="block";
				$("#spanId").innerHTML=arr[i]+"不能为空";
				inputs[i].parentNode.style.borderColor="#fa6060";
				return;
			}
		}
		//正则验证
		var reg = /^1[3-9]\d{9}$/i;
		if(reg.test($("#stuid").value)==false){
			$("#disp").style.display="block";
			$("#spanId").innerHTML="请输入正确的手机号";
			$("#stuid").parentNode.style.borderColor="#fa6060";
			return;
		}

		

		//保存cookie
		if($("#color").checked==true){
			saveCookie('username',$('username').value,7);
			saveCookie('userpass',$('userpass').value,7);
		}
		// ajax创建对象
		let xhr = new XMLHttpRequest();
		// 设置请求参数
		xhr.open('post','loginCheck1.php',true);
		// 设置回调函数
		xhr.onreadystatechange=function(){
			if(xhr.readyState==4 && xhr.status==200){
				if(xhr.responseText=='1'){
					// 存cookie
					saveCookie("username",$("#stuid").value,7);
					//跳转首页
					location.href="index.html";
				}
				if(xhr.responseText=='0'){
					$("#disp").style.display="block";
					$("#spanId").innerHTML="该手机账号未注册";
				}else{
					$("#disp").style.display="block";
					$("#spanId").innerHTML="账号或密码错误";
				}
			}
		}
		xhr.setRequestHeader('Content-type','application/x-www-form-urlencoded');
		// 发送
		xhr.send("stuid="+$("#stuid").value+"&stupass="+$("#stupass").value);
	}
}

function $(str){   //id  class tagname
	if(str.charAt(0) == "#"){
		return document.getElementById(str.substring(1));
	}else if(str.charAt(0) == "."){
		return document.getElementsByClassName(str.substring(1));
	}else{
		return document.getElementsByTagName(str);
	}
}		
</script>